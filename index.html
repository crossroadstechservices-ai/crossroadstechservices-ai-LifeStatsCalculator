<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Life Stats Calculator - Days Lived, Life Expectancy & Birthday Countdown</title>
  <meta name="description" content="Calculate your life statistics - discover days lived, age milestones, and birthday countdown with shareable results.">

  <!-- ✅ Google Analytics 4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX'); // 🔄 Replace with your GA Measurement ID
  </script>

  <style>
    /* --- your full CSS unchanged --- */
  </style>
</head>
<body>
  <!-- Dark Mode Toggle -->
  <div class="theme-toggle" onclick="toggleTheme()">
    <span id="themeIcon">🌙</span>
    <span id="themeText">Dark</span>
  </div>

  <header>
    <h1><span class="logo-icon">📊</span> Life Stats Calculator</h1>
    <p>Find out how many days you've lived and your life milestones!</p>
  </header>

  <!-- (ads + content unchanged) -->

  <footer>
    <p>✨ Made for fun — share your stats and celebrate milestones!</p>
    <p>Life Stats Calculator - Your journey in numbers</p>
  </footer>

  <script>
    // ✅ GA4 Share Event Tracker
    function trackShare(platform, stats) {
      if (typeof gtag === "function") {
        gtag('event', 'share', {
          method: platform,
          daysLived: stats.daysLived,
          age: stats.age,
          progress: stats.progress
        });
      }
    }

    // Dark mode + other functions unchanged ...

    // Main form submission
    document.getElementById("lifeForm").addEventListener("submit", function(e) {
      e.preventDefault();
      
      try {
        const dobInput = document.getElementById("dob").value;
        if (!dobInput) return;

        const dob = new Date(dobInput);
        const today = new Date();

        // Age in days
        const diffTime = today - dob;
        const ageInDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));

        // Age in years
        let ageInYears = today.getFullYear() - dob.getFullYear();
        const hasHadBirthday =
          today.getMonth() > dob.getMonth() ||
          (today.getMonth() === dob.getMonth() && today.getDate() >= dob.getDate());
        if (!hasHadBirthday) ageInYears--;

        // Next birthday
        let nextBirthday = new Date(today.getFullYear(), dob.getMonth(), dob.getDate());
        if (today > nextBirthday) {
          nextBirthday.setFullYear(today.getFullYear() + 1);
        }
        const daysUntilBirthday = Math.ceil((nextBirthday - today) / (1000 * 60 * 60 * 24));

        // Life progress
        const lifeExpectancy = 80 * 365;
        const lifeProgress = (ageInDays / lifeExpectancy) * 100;

        // Create share text
        const shareText = `🎉 I've lived ${ageInDays.toLocaleString()} days (${ageInYears} years)! Next birthday in ${daysUntilBirthday} days. Life progress: ${lifeProgress.toFixed(1)}% ⏳

✨ Calculate yours: ${window.location.href}`;

        // ✅ Build results with share buttons that trigger GA events
        document.getElementById("results").innerHTML = `
          <p>📅 You have lived <strong>${ageInDays.toLocaleString()}</strong> days.</p>
          <p>🌟 You are <strong>${ageInYears}</strong> years old.</p>
          <p>🎂 Your next birthday is in <strong>${daysUntilBirthday}</strong> days.</p>
          <p>⏳ Estimated life progress: <strong>${lifeProgress.toFixed(1)}%</strong></p>
          
          <div style="margin-top: 30px; padding: 25px; background: linear-gradient(135deg, #667eea, #764ba2, #f093fb); border-radius: 20px; color: white; box-shadow: 0 15px 35px rgba(102, 126, 234, 0.3);">
            <h3 style="text-align: center; margin-bottom: 25px; color: white; font-size: 1.5rem;">🎉 Share Your Life Stats</h3>
            
            <div style="display: flex; flex-direction: column; gap: 12px;">
              <a onclick="trackShare('Twitter', {daysLived: ${ageInDays}, age: ${ageInYears}, progress: ${lifeProgress.toFixed(1)}})" 
                 href="https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}" 
                 target="_blank" style="display: block; background: #1da1f2; color: white; padding: 15px 20px; border-radius: 12px; text-decoration: none; text-align: center; font-weight: 600;">
                🐦 Share on Twitter/X
              </a>
              <a onclick="trackShare('Facebook', {daysLived: ${ageInDays}, age: ${ageInYears}, progress: ${lifeProgress.toFixed(1)}})" 
                 href="https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}&quote=${encodeURIComponent(shareText)}" 
                 target="_blank" style="display: block; background: #1877f2; color: white; padding: 15px 20px; border-radius: 12px; text-decoration: none; text-align: center; font-weight: 600;">
                📘 Share on Facebook
              </a>
              <a onclick="trackShare('WhatsApp', {daysLived: ${ageInDays}, age: ${ageInYears}, progress: ${lifeProgress.toFixed(1)}})" 
                 href="https://wa.me/?text=${encodeURIComponent(shareText)}" 
                 target="_blank" style="display: block; background: #25d366; color: white; padding: 15px 20px; border-radius: 12px; text-decoration: none; text-align: center; font-weight: 600;">
                💬 Share on WhatsApp
              </a>
              <button onclick="copyToClipboard('${shareText.replace(/'/g, "\\\'")}'); trackShare('Copy', {daysLived: ${ageInDays}, age: ${ageInYears}, progress: ${lifeProgress.toFixed(1)}})" 
                      style="display: block; background: #6c757d; color: white; padding: 15px 20px; border-radius: 12px; border: none; text-align: center; font-weight: 600; cursor: pointer; width: 100%;">
                📋 Copy Stats to Clipboard
              </button>
            </div>
          </div>
        `;

        // Show achievements and comparisons
        const achievements = getAchievements(ageInDays, ageInYears, lifeProgress);
        setTimeout(() => showAchievements(achievements), 1000);

        const comparisons = getFunComparisons(ageInDays, ageInYears);
        setTimeout(() => showComparisons(comparisons), 1500);

      } catch (error) {
        console.error("Calculation error:", error);
        alert("Error calculating stats. Please try again.");
      }
    });
  </script>
</body>
</html>
